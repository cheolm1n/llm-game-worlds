# 틀린 글 찾기 챌린지 - 개발 명세서 (LLM + pygame 버전)

## 1. 게임 개요

- **게임 이름 (예시)**: 틀린 글 찾기 챌린지
- **게임 목적**:
    - LLM이 생성하는 컨텐츠가 범람하는 세상 속에서 인간의 비판적 읽기 능력을 키워주는 `기능성 게임`을 목표  
    - 사용자에게 **최신 뉴스/이슈 기반의 500자 이내 문장을 제공**
    - 문장 내 **LLM이 자동 생성한 단어 단위의 오류(약 5개)를 찾아 선택**
    - **제한 시간** 내에 모든 오류를 찾으면 게임이 종료되며, 걸린 시간이 기록됨
- **기술 스택**:
    - Python 3.12+
    - pygame
    - LangChain 및 LangGraph
    - AWS Bedrock Nova Pro 
    - 한글 폰트 Pretendard

---

## 2. 게임 진행 흐름 (사용자 플로우)

### 2.1. 메인 메뉴 화면
- **게임 제목 및 소개**
    - "틀린 글 찾기" 제목 표시
    - 게임 방법 간략 안내 (키워드 선택 → 문장 분석 → 틀린 단어 클릭 → 정답 제출)
- **자동 키워드 생성 (LLM 연동)**
    - 사용자가 직접 키워드를 고르는 대신, **LLM이 3~5개의 키워드를 자동 추천**
    - 예제 키워드:
      ```json
      ["ChatGPT", "우주 탐사", "AI 규제", "신기술 동향", "스포츠 뉴스"]
      ```  
    - 사용자는 해당 키워드 중 하나를 선택하여 게임을 시작

### 2.2. 문장 생성 및 오류 삽입
- **인터넷 검색 및 뉴스 기반 문장 생성(LLM 활용)**
    - 사용자가 선택한 키워드를 바탕으로 **LLM이 자동으로 관련 배경 지식 검색**
    - 문제를 생성하는 동안엔 사용자 화면에 문제를 생성하고 있다는 안내 문구와 로딩 애니메이션 출력
    - 검색된 배경 지식을 활용하여 **500자 이내의 문장을 생성**
- **문장 내 오류 삽입 (LLM 활용)**
    - 문장 내 일부 내용을 **LLM이 문맥을 유지하면서 틀린 내용으로 변형**
    - 예제:
      # 원문과 반대 되는 내용
      ```
      원문: "최근 AI 연구가 빠르게 발전하고 있으며, 다양한 산업에서 활용되고 있다."
      오류 포함: "최근 AI 연구가 빠르게 쇠퇴하고 있으며, 다향한 산업에서 활용되고 있다."
      ```  
      # 전혀 무관한 내용
      ```
      원문: "최근 AI 연구는 OpenAI를 중심으로 빠르게 발전하고 있으며, 다양한 산업에서 활용되고 있다."
      오류 포함: "최근 AI 연구는 MicroStrategy를 중심으로 빠르게 발전하고 있으며, 다향한 산업에서 활용되고 있다."
      ```
    - 변형된 내용의 **위치 정보(인덱스)를 함께 저장**

### 2.3. 게임 화면 (문장 분석)
- **원고지 스타일 UI**
    - 각 단어를 개별 블록(`WordBlock`) 형태로 배치 (pygame Rect 활용)
    - 한글이 깨지지 않도록 폰트 파일(TTF) 포함
- **문장 표시 및 단어 단위 분할**
    - 문장을 **단어 단위로 분할**하여 배치
    - 각 단어는 **클릭 가능**하며, 선택하면 시각적 피드백 (배경색을 빨간 형광펜 색으로 변경 등) 제공
- **게임 타이머 표시**
    - 화면 상단에 **경과 시간**을 표시

### 2.4. 정답 제출 및 결과 확인
- **제출 버튼**
    - 사용자가 선택한 단어 인덱스를 확인하고 **정답 판정**
- **정답 검증**
    - 선택된 단어 인덱스와 **LLM이 생성한 오류 위치 정보**를 비교
    - 맞춘 개수, 틀린 개수, 남은 오류 정보를 화면에 표시
- **피드백 및 재도전**
    - **“총 5개 중 X개 정답”**과 같은 피드백을 제공
    - 모든 오류를 찾으면 최종 완료 화면으로 이동, 그렇지 않으면 다시 도전할 기회를 제공

### 2.5. 게임 완료 화면
- **게임 종료 및 기록 저장**
    - 모든 오류(5개)를 정확하게 선택하면 게임이 종료됨
    - 게임 시작부터 종료까지 걸린 총 소요 시간을 표시
- **재도전 옵션**
    - “다른 키워드 도전하기” 또는 “처음으로 돌아가기” 버튼 제공
- **최고 기록 저장**
    - 최고 기록을 로컬에 저장하여, 이후 플레이 시 비교 가능

---

## 3. 주요 기능 및 요구사항

### 3.1. LLM 기반 키워드 및 문제 생성
- **자동 키워드 생성**
  ```
  "최근 1주일간 가장 많이 언급된 IT, 과학, 스포츠, 경제 관련 키워드 5개를 제공해줘."
  ```  
- **인터넷 검색 기반 문장 생성 (agent 활용)**
  ```
  "다음 키워드에 대해 배경 지식을 인터넷으로 검색 한 뒤 다음 포맷에 맞춰 `틀린 글 찾기` 게임 문제를 생성해주세요. "
  ```
  ```json
  {
    "keyword": "AI 규제"
  }
  ```  

### 3.2. 게임 UI (pygame)
- **텍스트 배치 및 터치 이벤트 처리**
- **선택된 단어 강조**
- 문제 화면은 원고지 모양

### 3.3. 정답 판정 및 결과
- **사용자가 선택한 단어 인덱스를 저장**
- **오류 인덱스와 비교**

---

## 4. 기술 스택 및 개발 환경

### 4.1. 개발 스택
- **프로그래밍 언어**: Python 3.12 이상
- **게임 엔진**: pygame
- **LLM 연동**: LangChain, LangGraph
- **LLM 모델**: Bedrock Nova Pro, Nova Micro
- **검색 도구(서비스)**: Tavily search

---

## 5. 프로젝트 디렉토리 구조 예시
```
pygame-misspelling-game/
├─ main.py                   # 메인 게임 로직
├─ llm.py                    # LLM 호출 로직
├─ .env                      # 환경 설정 값 
├─ data/
│ ├─ scores.json           # 사용자 기록 저장
└─ assets/
   ├─ fonts/NanumGothic.ttf # 한글 폰트
   ├─ bgm.mp4               # 문제 풀이 동안 재생 될 배경음악
```